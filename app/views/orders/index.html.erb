<h1 class="text-center my-4">Order History</h1>

<% if @orders.any? %>
  <div class="container">
    <div class="row">
      <% @orders.each do |order| %>
        <div class="col-md-6 col-lg-4 mb-4">
          <div class="card shadow-sm border-light">
            <div class="card-header">
              <h5 class="card-title mb-0">Order #<%= order.id %></h5>
            </div>
            <div class="card-body">
              <p class="card-text">
                <strong>Order Date:</strong> <%= order.created_at.strftime("%B %d, %Y") %><br>
                <strong>Order Address:</strong> <%= order.address %><br>
                <strong>Status:</strong>
                <span class="badge <%= 'bg-success' if order.status == 'Delivered' %> <%= 'bg-warning' if order.status == 'Pending' %> <%= 'bg-danger' if order.status == 'Cancelled' %>">
                  <%= order.status %>
                </span>
              </p>
              
              
                              <ul class="list-group">
                              <% order.products.each do |product| %>
                                <%= debug product %> <!-- Debug output to inspect the product object -->
                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                <%binding.pry%>

                                <%= product.image %>
                      <%= product.name %>
                      <%= product.description %>
                      <%= order.created_at %>
                      <span class="badge bg-primary rounded-pill">
                       
                      </span> 
                      x<%= product.stock %> 
                    </li>
                  <% end %>
                </ul>

              </ul>

            </div>
          </div>
        </div>
      <% end %>
    </div>
  </div>
<% else %>
  <div class="alert alert-warning text-center" role="alert">
    No Orders Found.
  </div>
<% end %>
